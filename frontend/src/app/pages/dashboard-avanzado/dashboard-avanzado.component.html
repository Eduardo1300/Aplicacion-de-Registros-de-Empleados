<div class="dashboard-container">
  <div class="page-header">
    <h1><i class="bi bi-graph-up"></i> Dashboard Avanzado</h1>
    <p>Análisis e indicadores clave de desempeño</p>
  </div>

  <!-- KPIs Cards -->
  <div class="kpis-section">
    <div *ngFor="let kpi of kpis" class="kpi-card">
      <div class="kpi-icon">
        <i [ngClass]="'bi-' + kpi.icono"></i>
      </div>
      <div class="kpi-content">
        <h3>{{ kpi.titulo }}</h3>
        <div class="kpi-value">{{ kpi.valor }}</div>
        <div class="kpi-change">{{ kpi.porcentaje }}</div>
      </div>
    </div>
  </div>

  <!-- Productividad por Departamento -->
  <div class="section">
    <h2>Productividad por Departamento</h2>
    <div class="productivity-grid">
      <div *ngFor="let dept of productividad" class="productivity-item">
        <h4>{{ dept.departamento }}</h4>
        <div class="progress-bar">
          <div class="progress-fill" [style.width]="dept.productividad + '%'" [style.backgroundColor]="getColor(dept.productividad)"></div>
        </div>
        <div class="progress-text">{{ dept.productividad }}% de {{ dept.meta }}%</div>
      </div>
    </div>
  </div>

  <!-- Comparativas -->
  <div class="section">
    <h2>Comparativa Mensual</h2>
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Mes</th>
            <th>Asistencia</th>
            <th>Licencias Utilizadas</th>
            <th>Horas Extra</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let comp of comparativas">
            <td>{{ comp.mes }}</td>
            <td><span class="badge" [style.backgroundColor]="getColor(comp.asistencia)">{{ comp.asistencia }}%</span></td>
            <td>{{ comp.licencias }} días</td>
            <td>{{ comp.horas_extra }} horas</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Predicciones -->
  <div class="section">
    <h2>Predicciones Próximos Meses</h2>
    <div class="predictions-grid">
      <div *ngFor="let pred of predicciones" class="prediction-card">
        <h4>{{ pred.periodo }}</h4>
        <div class="prediction-item">
          <span>Asistencia Predicha</span>
          <div class="pred-value">{{ pred.asistencia_pred }}%</div>
        </div>
        <div class="prediction-item">
          <span>Productividad Predicha</span>
          <div class="pred-value">{{ pred.productividad_pred }}%</div>
        </div>
        <div class="prediction-item">
          <span>Rotación Predicha</span>
          <div class="pred-value" style="color: #ef4444;">{{ pred.rotacion_pred }}%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recomendaciones -->
  <div class="section recommendations">
    <h2>Recomendaciones</h2>
    <ul>
      <li><i class="bi bi-check-circle"></i> Mantener programas de capacitación para mejorar productividad</li>
      <li><i class="bi bi-check-circle"></i> Revisar políticas de licencias para reducir rotación</li>
      <li><i class="bi bi-check-circle"></i> Implementar incentivos para el departamento de Tecnología</li>
      <li><i class="bi bi-check-circle"></i> Monitorear horas extra para evitar fatiga laboral</li>
    </ul>
  </div>
</div>
